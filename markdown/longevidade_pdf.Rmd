---
geometry: "left=1cm,right=1cm,top=2cm,bottom=2cm"
params:
  data: !r NA
  val_date: !r Sys.Date()
fontsize: 12pt
output: 
  pdf_document: 
    keep_tex: yes
    latex_engine: xelatex
    includes:
      in_header: mystyles.sty
always_allow_html: yes
---

```{r options, message = FALSE, warning = FALSE, echo = FALSE}

# determine if running in Shiny or not
is_in_shiny <- if(is.null(shiny::getDefaultReactiveDomain())) FALSE else TRUE
if (is_in_shiny == TRUE) shiny::incProgress(amount = 0, message = "Preparando")

# packages
 library(dplyr)
 library(lubridate)
 library(knitr)
 library(kableExtra)
 #library(summaryrow) # remotes::install_github("merlinoa/summaryrow")

# knitr options
knitr::opts_chunk$set(
  echo = FALSE
)

options(knitr.table.format = "latex")

```

<!--


-->

```{r data_prep, eval = TRUE}
if (is_in_shiny) shiny::incProgress(amount = 0.25, message = "Loading Data")

 # parameters
 dados <- params$data
 
 
 escolaridade <- c('Sem escolaridade','Fundamental I','Fundamental II', 'Ensino médio'  ,'Superior Incompleto', 'Superior Completo' )
 sit_conjugal <- c('Casado', 'Solteiro' , 'Viúvo' , 'Separado/divorciado' , 'União estável', 'Ignorado' )
 cor_pele <-   c('Branca', 'Preta', 'Amarela', 'Parda', 'Indígena' )
 pessoa_resp <- c('Sozinho', 'Pais' , 'Representante legal', 'Família' , 'Outros')
 

```



\newpage


\begin{center}
\Large
   Formulário de registro \\
   de Óbito Precoce.
\Large
\end{center}

\vspace{0.4cm}
<!-- em seguida, moddificar aqui quando estrugturar a lista de usuários-->
 \begin{tabular}{p{0.33\textwidth}p{0.33\textwidth}p{0.33\textwidth}}
 
 Responsável: `r dados$send_usuario`  &   & Número do registro: `r dados$id` \\
 
 Data do evento: `r dados$dat_obito` & UF do óbito: `r dados$long_uf_obito` &  Município do óbito: `r dados$municipio_obito`   \\
 
 Endereço do óbito: `r dados$endereco_obito` &  Bairro: `r dados$bairro_obito` & Local do ocorrido: `r dados$local_obito ` \\
 
 É um período atípico? `r if(dados$periodo_atipico == 1){"Sim"}else{"Não"}` & & 

\end{tabular}

 Informações adicionais:
 
 `r dados$long_adicional`
 
 \vspace{0.4cm}
 \hrule
 
 \begin{center}
 \large Dados do Paciente 
 \end{center}
 
 \begin{tabular}{p{0.33\textwidth}p{0.33\textwidth}p{0.33\textwidth}}
 
 Paciente: `r dados$paciente` & Sexo: `r if(dados$sexo == 1){"Masculino"}else{"Feminino"}` & CPF: `r dados$paciente_cpf` \\
 
 Data de Nascimento: `r dados$dat_nascimento` & Idade: `r floor(dados$idade)` & \\
 
 UF de residência: `r dados$estado_residencia` & Município de residência: `r dados$municipio_residencia` & \\
 
 Endereço: `r dados$endereco_residencia` & Bairro: `r dados$bairro_residencia` & Escolaridade: `r escolaridade[dados$escolaridade] ` \\ 
 
 Cor da pele: `r cor_pele[dados$cor]` & Situação conjugal: `r sit_conjugal[dados$situacoo_conjungal] ` & \\
 
 Ocupação exercida: `r dados$ocupacao_exercida` &  Código CBO: `r dados$codigo_cbo` &    \\
 
 Pessoa responsável: `r pessoa_resp[dados$pessoa_responsavel]` & Nome responsável: `r dados$nome_responsavel` & CPF responsável: `r dados$cpf_responsavel`

\end{tabular}

 Informação Adicional: 
 
 `r dados$info_adicional_resp`
 
 \vspace{0.4cm}
 \hrule
 
 
  \begin{center}
 \large Motivação
 \end{center}
 
  \begin{tabular}{p{0.33\textwidth}p{0.33\textwidth}p{0.33\textwidth}}
 
 Caracterização do Evento: `r if(dados$caracterizacao_evento == 1){'Natural'}else{"Incidental"}` & Causa Básica: `r dados$cid_base` & Causa secundária: `r dados$cid_sec` 
 \end{tabular}
 
 \begin{tabular}{p{0.25\textwidth}p{0.25\textwidth}p{0.25\textwidth}p{0.25\textwidth}}
 
 Fumante? `r if(dados$fumante == 1){"Sim"}else{"Não"}` &   Obeso? `r if(dados$obeso == 1){"Sim"}else{"Não"}` & 
  Praticava atividade física? `r if(dados$ativfisica == 1){"Sim"}else{"Não"}` &  Consumo excessivo de bebidas? `r if(dados$bebida == 1){"Sim"}else{"Não"}` \\
 
 Hipertensão? `r if(dados$hipertensao == 1){"Sim"}else{"Não"}` &   Diabetes? `r if(dados$diabetes == 1){"Sim"}else{"Não"}` & 
  Diagnóstico de câncer? `r if(dados$cancer == 1){"Sim"}else{"Não"} `  &
   
 
\end{tabular}



