---
geometry: "left=1cm,right=1cm,top=2cm,bottom=2cm"
params:
  data: !r NA
  val_date: !r Sys.Date()
fontsize: 12pt
output: 
  pdf_document: 
    keep_tex: yes
    latex_engine: xelatex
    includes:
      in_header: mystyles.sty
always_allow_html: yes
---

```{r options, message = FALSE, warning = FALSE, echo = FALSE}

# determine if running in Shiny or not
is_in_shiny <- if(is.null(shiny::getDefaultReactiveDomain())) FALSE else TRUE
if (is_in_shiny == TRUE) shiny::incProgress(amount = 0, message = "Preparando")

# packages
 library(dplyr)
 library(lubridate)
 library(knitr)
 library(kableExtra)
 #library(summaryrow) # remotes::install_github("merlinoa/summaryrow")

# knitr options
knitr::opts_chunk$set(
  echo = FALSE
)

options(knitr.table.format = "latex")

```

<!--


-->

```{r data_prep, eval = TRUE}
if (is_in_shiny) shiny::incProgress(amount = 0.25, message = "Loading Data")

 # parameters
 dados <- params$data
 
 
 escolaridade <- c('Sem escolaridade','Fundamental I','Fundamental II', 'Ensino médio'  ,'Superior Incompleto', 'Superior Completo' )
 sit_conjugal <- c('Casado', 'Solteiro' , 'Viúvo' , 'Separado/divorciado' , 'União estável', 'Ignorado' )
 cor_pele <-   c('Branca', 'Preta', 'Amarela', 'Parda', 'Indígena' )
 pessoa_resp <-  c('Mãe' , 'Responsável')
 tipo_parto <- c('Vaginal', 'Cesáreo', 'Não se aplica')
 tipo_idade <- c('Horas','Minuto', 'Não Aplicável')

```



\newpage


\begin{center}
\Large
   Formulário de registro \\
   de Infrequência Escolar.
\Large
\end{center}

\vspace{0.4cm}
<!-- em seguida, moddificar aqui quando estrugturar a lista de usuários-->
 \begin{tabular}{p{0.33\textwidth}p{0.33\textwidth}p{0.33\textwidth}}
 
 Responsável: `r dados$send_usuario`  &   & Número do registro: `r dados$id` \\
 
 Município: `r dados$municipio`  & Escola: `r dados$escola ` &  \\
 
 É um período atípico? `r if(dados$periodo_atipico == 1){"Sim"}else{"Não"}` & & 

\end{tabular}


 Informações adicionais:
 
 `r dados$infreq_adicional`
 
 \vspace{0.4cm}
 \hrule
 
 \begin{flushleft}
 \large Dados do Aluno 
 \end{flushleft}


 \begin{tabular}{p{0.33\textwidth}p{0.33\textwidth}p{0.33\textwidth}}
 Aluno: `r dados$aluno` & CPF Aluno: `r dados$aluno_cpf` & Data de nascimento: `r dados$dat_nascimento` \\  
 
 Idade: `r dados$idade ` &  Série: `r dados$serie` & Turma: `r dados$turma ` \\
 
 Município de residência: `r dados$municipio_residencia ` & Endereço: `r dados$endereco_residencia ` & Bairro: `r dados$bairro_residencia` \\

 Pessoa responsável: `r pessoa_resp[dados$pessoa_responsavel]` & Nome responsável: `r dados$nome_responsavel` & Nome responsável (2): `r dados$nome_responsavel_2`
 
 
\end{tabular}

 
 Informações adicionais:
 
 `r dados$info_adicional_resp`
 
  \vspace{0.4cm}
 \hrule
 
 \begin{flushleft}
 \large Caracterização do Evento
 \end{flushleft}
 
 Causa principal: `r dados$possiveis_causas_principal ` \\
 Causas secundárias: `r dados$possiveis_causas ` \\ 
 
  \begin{flushleft}
 \large Datas:
 \end{flushleft}
 \begin{tabular}{p{0.25\textwidth}p{0.25\textwidth}p{0.25\textwidth}p{0.25\textwidth}}
 `r dados$falta_1 ` & `r dados$falta_2 ` & `r dados$falta_3 ` & `r dados$falta_4 ` \\
 `r dados$falta_5` & `r dados$falta_6` &   `r dados$falta_7 ` & 
 
\end{tabular}
 
